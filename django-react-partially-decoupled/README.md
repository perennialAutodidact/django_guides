# Partially Decoupled React/Django

This is an example of how to host a React app within a Django project. In essence, the `index.html` file that is generated by React when `yarn build` is executed is rendered by Django, thereby serving the React app within it. 

This allows the use of Django's authenication and sessions backends as well as CSRF verification.

## Setup

The Django and React projects are created in the same directory. The Django project folder is called `config` and the React app is in the `frontend` folder. 

In the `frontend` folder, Run `yarn install` to install dependencies.

Run `yarn build` to generate the `build` folder.

Remove `build/` from the `.gitignore` file.

In Django's `settings.py` file, add the React app's `build` folder to Django's templates and static files variables.

```python
# config/settings.py

TEMPLATES = [
    {
        # ...
        'DIRS': [BASE_DIR/'frontend'/'build'],
        # ...
    },
]

STATICFILES_DIRS = [BASE_DIR/'frontend'/'build'/'static']

```

## `config/urls.py`
Defer a blank path to the `pages` app's `urls.py` file.

```python
# config/urls.py

from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('pages.urls'))
]
```

## Pages App
Run `python manage.py startapp pages`.

Add `pages` to the `INSTALLED_APPS` in `settings.py`

### `pages/urls.py`

Create `urls.py` inside the `pages` app folder and add the following:

```python
# pages/urls.py

from django.urls import path

from . import views

urlpatterns = [
    path('', views.index)
]
```

### pages/views.py

```python
# pages/views.py

from django.shortcuts import render

def index(request):
    # render frontend/build/index.html
    return render(request, 'index.html')
```


Run `python manage.py migrate && python manage.py runserver` and the React app should be rendered at `localhost:8000`